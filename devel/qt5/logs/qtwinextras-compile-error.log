# steps to manually reproduce compile error in qtwinextras with 07f6d25a00af112d46e939992fb9cf42879fc7c1

cd /build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/build-x86_64-w64-mingw32-shared/src/winextras

/usr/x86_64-w64-mingw32/lib/qt/bin/moc -DUNICODE -D_UNICODE -D__INTRINSIC_DEFINED__xgetbv -DWINVER=0x0601 -D_WIN32_WINNT=0x0601 -DQT_NO_FOREACH -DQT_NO_NARROWING_CONVERSIONS_IN_CONNECT -DQT_BUILD_WINEXTRAS_LIB -DQT_BUILDING_QT -D_CRT_SECURE_NO_WARNINGS -D_USE_MATH_DEFINES -DQT_NO_CAST_TO_ASCII -DQT_ASCII_CAST_WARNINGS -DQT_MOC_COMPAT -DQT_USE_QSTRINGBUILDER -DQT_DEPRECATED_WARNINGS -DQT_DISABLE_DEPRECATED_BEFORE=0x040800 -DQT_NO_EXCEPTIONS -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB --include .moc/release/moc_predefs.h -I/usr/x86_64-w64-mingw32/lib/qt/mkspecs/win32-g++ -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include/QtWinExtras -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/build-x86_64-w64-mingw32-shared/include -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/build-x86_64-w64-mingw32-shared/include/QtWinExtras -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include/QtWinExtras/5.11.0 -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include/QtWinExtras/5.11.0/QtWinExtras -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras/tmp -I/usr/x86_64-w64-mingw32/include/qt/QtGui/5.11.0 -I/usr/x86_64-w64-mingw32/include/qt/QtGui/5.11.0/QtGui -I/usr/x86_64-w64-mingw32/include/qt -I/usr/x86_64-w64-mingw32/include/qt/QtGui -I/usr/x86_64-w64-mingw32/include/qt/QtCore/5.11.0 -I/usr/x86_64-w64-mingw32/include/qt/QtCore/5.11.0/QtCore -I/usr/x86_64-w64-mingw32/include/qt/QtCore -I. -I/usr/x86_64-w64-mingw32/include/c++/8.1.0 -I/usr/x86_64-w64-mingw32/include/c++/8.1.0/x86_64-w64-mingw32 -I/usr/x86_64-w64-mingw32/include/c++/8.1.0/backward -I/usr/lib/gcc/x86_64-w64-mingw32/8.1.0/include -I/usr/lib/gcc/x86_64-w64-mingw32/8.1.0/include-fixed -I/usr/x86_64-w64-mingw32/include /build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras/qwintaskbarbutton.h -o .moc/release/moc_qwintaskbarbutton.cpp/usr/x86_64-w64-mingw32/lib/qt/bin/moc -DUNICODE -D_UNICODE -D__INTRINSIC_DEFINED__xgetbv -DWINVER=0x0601 -D_WIN32_WINNT=0x0601 -DQT_NO_FOREACH -DQT_NO_NARROWING_CONVERSIONS_IN_CONNECT -DQT_BUILD_WINEXTRAS_LIB -DQT_BUILDING_QT -D_CRT_SECURE_NO_WARNINGS -D_USE_MATH_DEFINES -DQT_NO_CAST_TO_ASCII -DQT_ASCII_CAST_WARNINGS -DQT_MOC_COMPAT -DQT_USE_QSTRINGBUILDER -DQT_DEPRECATED_WARNINGS -DQT_DISABLE_DEPRECATED_BEFORE=0x040800 -DQT_NO_EXCEPTIONS -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB --include .moc/release/moc_predefs.h -I/usr/x86_64-w64-mingw32/lib/qt/mkspecs/win32-g++ -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include/QtWinExtras -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/build-x86_64-w64-mingw32-shared/include -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/build-x86_64-w64-mingw32-shared/include/QtWinExtras -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include/QtWinExtras/5.11.0 -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include/QtWinExtras/5.11.0/QtWinExtras -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras/tmp -I/usr/x86_64-w64-mingw32/include/qt/QtGui/5.11.0 -I/usr/x86_64-w64-mingw32/include/qt/QtGui/5.11.0/QtGui -I/usr/x86_64-w64-mingw32/include/qt -I/usr/x86_64-w64-mingw32/include/qt/QtGui -I/usr/x86_64-w64-mingw32/include/qt/QtCore/5.11.0 -I/usr/x86_64-w64-mingw32/include/qt/QtCore/5.11.0/QtCore -I/usr/x86_64-w64-mingw32/include/qt/QtCore -I. -I/usr/x86_64-w64-mingw32/include/c++/8.1.0 -I/usr/x86_64-w64-mingw32/include/c++/8.1.0/x86_64-w64-mingw32 -I/usr/x86_64-w64-mingw32/include/c++/8.1.0/backward -I/usr/lib/gcc/x86_64-w64-mingw32/8.1.0/include -I/usr/lib/gcc/x86_64-w64-mingw32/8.1.0/include-fixed -I/usr/x86_64-w64-mingw32/include /build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras/qwinjumplist.h -o .moc/release/moc_qwinjumplist.cppx86_64-w64-mingw32-g++ -c -include .pch/release/QtWinExtrasDepends -pipe -pipe -g -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions --param=ssp-buffer-size=4 -fno-keep-inline-dllexport -fpch-preprocess -O2 -g -std=c++1z -fno-exceptions -Wall -W -Wextra -Wvla -Wdate-time -Wshift-overflow=2 -Wduplicated-cond -Wno-stringop-overflow -DUNICODE -D_UNICODE -D__INTRINSIC_DEFINED__xgetbv -DWINVER=0x0601 -D_WIN32_WINNT=0x0601 -DQT_NO_FOREACH -DQT_NO_NARROWING_CONVERSIONS_IN_CONNECT -DQT_BUILD_WINEXTRAS_LIB -DQT_BUILDING_QT -D_CRT_SECURE_NO_WARNINGS -D_USE_MATH_DEFINES -DQT_NO_CAST_TO_ASCII -DQT_ASCII_CAST_WARNINGS -DQT_MOC_COMPAT -DQT_USE_QSTRINGBUILDER -DQT_DEPRECATED_WARNINGS -DQT_DISABLE_DEPRECATED_BEFORE=0x040800 -DQT_NO_EXCEPTIONS -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras -I. -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include/QtWinExtras -I../../include -I../../include/QtWinExtras -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include/QtWinExtras/5.11.0 -I/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/include/QtWinExtras/5.11.0/QtWinExtras -Itmp -isystem /usr/x86_64-w64-mingw32/include/qt/QtGui/5.11.0 -isystem /usr/x86_64-w64-mingw32/include/qt/QtGui/5.11.0/QtGui -isystem /usr/x86_64-w64-mingw32/include/qt -isystem /usr/x86_64-w64-mingw32/include/qt/QtGui -isystem /usr/x86_64-w64-mingw32/include/qt/QtCore/5.11.0 -isystem /usr/x86_64-w64-mingw32/include/qt/QtCore/5.11.0/QtCore -isystem /usr/x86_64-w64-mingw32/include/qt/QtCore -I.moc/release -isystem /usr/x86_64-w64-mingw32/include/freetype2 -isystem /usr/x86_64-w64-mingw32/include/harfbuzz -isystem /usr/x86_64-w64-mingw32/include/glib-2.0 -I/usr/x86_64-w64-mingw32/lib/glib-2.0/include -isystem /usr/x86_64-w64-mingw32/include/dbus-1.0 -I/usr/x86_64-w64-mingw32/lib/dbus-1.0/include -isystem /usr/x86_64-w64-mingw32/include/mariadb -I/usr/x86_64-w64-mingw32/lib/qt/mkspecs/win32-g++  -o .obj/release/qwinthumbnailtoolbar.o /build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras/qwinthumbnailtoolbar.cpp

x86_64-w64-mingw32-g++ -g -shared -Wl,-subsystem,windows -Wl,--out-implib,/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/build-x86_64-w64-mingw32-shared/lib/libQt5WinExtras.dll.a -o ../../lib/Qt5WinExtras.dll #object_script.Qt5WinExtras.Release  -lglu32 -lopengl32 -lgdi32 -luser32 -lQt5Gui -lQt5Core -lole32 -lshlwapi -lshell32 -ldwmapi
#./.obj/release/qwinthumbnailtoolbar.o: In function `QWinThumbnailToolBarPrivate::updateIconicPixmapsEnabled(bool)':
#/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras/qwinthumbnailtoolbar.cpp:246: undefined reference to `DwmInvalidateIconicBitmaps'
#./.obj/release/qwinthumbnailtoolbar.o: In function `QWinThumbnailToolBarPrivate::updateIconicLivePreview(tagMSG const*)':
#/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras/qwinthumbnailtoolbar.cpp:411: undefined reference to `DwmSetIconicLivePreviewBitmap'
#./.obj/release/qwinthumbnailtoolbar.o: In function `QWinThumbnailToolBarPrivate::updateIconicThumbnail(tagMSG const*)':
#/build/mingw-w64-qt5-winextras/src/qtwinextras-everywhere-src-5.11.0/src/winextras/qwinthumbnailtoolbar.cpp:396: undefined reference to `DwmSetIconicThumbnail'
#collect2: error: ld returned 1 exit status

grep DwmSetIconicThumbnail /usr/x86_64-w64-mingw32/lib/libdwmapi.a
# [nothing]

grep DwmSetIconicThumbnail /usr/i686-w64-mingw32/lib/libdwmapi.a
# Binary file /usr/i686-w64-mingw32/lib/libdwmapi.a matches
